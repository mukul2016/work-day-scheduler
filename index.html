<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
      integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous" />
    <link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="style.css" />
    <title>Work Day Scheduler</title>
  </head>

  <body>
    <header class="jumbotron">
      <h1 class="display-3">Work Day Scheduler</h1>
      <p class="lead">A simple calendar app for scheduling your work day</p>
      <p id="currentDay" class="lead"></p>
    </header>
    <div class="container">
      <!-- Timeblocks go here -->
      <div class="input-group mb-3">
        <div class="input-group-prepend ">
          <span class="input-group-text"> 9:00AM</span>
        </div>
        <textarea id="todo-item1" class="form-control" aria-label="With textarea"></textarea>
        <button type="button" id="button1" class="btn btn-secondary saveBtn1">1</button>
      </div>
      <!-- Add 8 more timeblocks -->
      <div class="input-group mb-3">
        <div class="input-group-prepend ">
          <span class="input-group-text"> 10:00AM</span>
        </div>
        <textarea id="todo-item2" class="form-control" aria-label="With textarea"></textarea>
        <button type="button" id="button1" class="btn btn-secondary saveBtn1">1</button>
      </div>
      <div class="input-group mb-3">
        <div class="input-group-prepend ">
          <span class="input-group-text"> 11:00AM</span>
        </div>
        <textarea id="todo-item3" class="form-control" aria-label="With textarea"></textarea>
        <button type="button" id="button1" class="btn btn-secondary saveBtn1">1</button>
      </div>
      <div class="input-group mb-3">
        <div class="input-group-prepend ">
          <span class="input-group-text"> 12:00PM</span>
        </div>
        <textarea id="todo-item4" class="form-control" aria-label="With textarea"></textarea>
        <button type="button" id="button1" class="btn btn-secondary saveBtn1">1</button>
      </div>
      <div class="input-group mb-3">
        <div class="input-group-prepend ">
          <span class="input-group-text"> 1:00PM</span>
        </div>
        <textarea id="todo-item5" class="form-control" aria-label="With textarea"></textarea>
        <button type="button" id="button1" class="btn btn-secondary saveBtn1">1</button>
      </div>
      <div class="input-group mb-3">
        <div class="input-group-prepend ">
          <span class="input-group-text"> 2:00PM</span>
        </div>
        <textarea id="todo-item6" class="form-control" aria-label="With textarea"></textarea>
        <button type="button" id="button1" class="btn btn-secondary saveBtn1">1</button>
      </div>
      <div class="input-group mb-3">
        <div class="input-group-prepend ">
          <span class="input-group-text"> 3:00PM</span>
        </div>
        <textarea id="todo-item7" class="form-control" aria-label="With textarea"></textarea>
        <button type="button" id="button1" class="btn btn-secondary saveBtn1">1</button>
      </div>
      <div class="input-group mb-3">
        <div class="input-group-prepend ">
          <span class="input-group-text"> 4:00PM</span>
        </div>
        <textarea id="todo-item8" class="form-control" aria-label="With textarea"></textarea>
        <button type="button" id="button1" class="btn btn-secondary saveBtn1">1</button>
      </div>
      <div class="input-group mb-3">
        <div class="input-group-prepend ">
          <span class="input-group-text"> 5:00PM</span>
        </div>
        <textarea id="todo-item9" class="form-control" aria-label="With textarea"></textarea>
        <button type="button" id="button1" class="btn btn-secondary saveBtn1">1</button>
      </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
    <script>

      // Get the current day and display it 
      var currentDay = moment().format("dddd, MMMM Do YYYY, h:mm: a");
      document.querySelector('#currentDay').textContent = currentDay;


      var list = JSON.parse(localStorage.getItem('todolist')) || [];


      // This function checks if "Time" is past, present or future with reference 
      // to "now" and returns the past, present or future.
      function isTimePast(Time) {
        var currHour = moment().hour();
        console.log("Beginning Hour", Time);
        console.log("CurrHour", currHour);
        diff = Time - currHour;
        if (diff === 0) {
          return "present";
        } else if (diff < 0) {
          return "past";
        } else {
          return "future";
        }
      }

      // Color codes all the nine timeblocks
      function colorTimeBlocks() {
        var returnVal = isTimePast("9");
        console.log("returnVal", returnVal);
        $("#todo-item1").addClass(returnVal);

        var returnVal = isTimePast("10");
        console.log("returnVal", returnVal);
        $("#todo-item2").addClass(returnVal);

        var returnVal = isTimePast("11");
        console.log("returnVal", returnVal);
        $("#todo-item3").addClass(returnVal);

        var returnVal = isTimePast("12");
        console.log("returnVal", returnVal);
        $("#todo-item4").addClass(returnVal);

        var returnVal = isTimePast("13");
        console.log("returnVal", returnVal);
        $("#todo-item5").addClass(returnVal);

        var returnVal = isTimePast("14");
        console.log("returnVal", returnVal);
        $("#todo-item6").addClass(returnVal);

        var returnVal = isTimePast("15");
        console.log("returnVal", returnVal);
        $("#todo-item7").addClass(returnVal);

        var returnVal = isTimePast("16");
        console.log("returnVal", returnVal);
        $("#todo-item8").addClass(returnVal);

        var returnVal = isTimePast("17");
        console.log("returnVal", returnVal);
        $("#todo-item9").addClass(returnVal);

      }
      colorTimeBlocks();

      // storeInputToLocalStorage()
      // retrieveInputFromLocalStorage()

      //Make this is a function for all button click, right now only button1 click works.
      $('#button1').on('click', function (event) {
        event.preventDefault();

        // Get the todo-item1 "value" from the textbox and store it as a variable using `.val()` and `.trim()`
        var toDoTask = $('#todo-item1')
          .val()
          .trim();

        // Add the new to-do to our local 'list' variable
        list.push(toDoTask);

        // Save the to-dos into localStorage
        // We need to use JSON.stringify to turn the list from an array into a string
        localStorage.setItem('todolist', JSON.stringify(list));

        // Clear the textbox when done using `.val()`
        // $('#todo-item1').val('');
      });

    </script>
  </body>

</html>